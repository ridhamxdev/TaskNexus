<div class="dashboard-container">
  <ng-container *ngIf="!loggedIn; else loggedInBlock">
    <div class="tabs">
      <button [class.active]="isLoginTab" (click)="switchTab('login')">Login</button>
      <button [class.active]="!isLoginTab" (click)="switchTab('register')">Register</button>
    </div>
    <div class="tab-content">
      <form *ngIf="isLoginTab" (ngSubmit)="login()" autocomplete="on">
        <input type="email" [(ngModel)]="email" name="email" placeholder="Email" required>
        <input type="password" [(ngModel)]="password" name="password" placeholder="Password" required>
        <button type="submit">Login</button>
        <div *ngIf="authError" class="error-message">{{authError}}</div>
      </form>
      <form *ngIf="!isLoginTab" (ngSubmit)="register()" autocomplete="on">
        <input type="text" [(ngModel)]="regName" name="regName" placeholder="Name" required>
        <input type="email" [(ngModel)]="regEmail" name="regEmail" placeholder="Email" required>
        <input type="password" [(ngModel)]="regPassword" name="regPassword" placeholder="Password" required>
        <input type="text" [(ngModel)]="regPhone" name="regPhone" placeholder="Phone" required>
        <button type="submit">Register</button>
        <div *ngIf="regError" class="error-message">{{regError}}</div>
        <div *ngIf="regSuccess" class="success-message">{{regSuccess}}</div>
      </form>
    </div>
  </ng-container>
  <ng-template #loggedInBlock>
    <div class="welcome-bar">
      <span>Welcome! You are logged in.</span>
      <button (click)="logout()">Logout</button>
    </div>
    <div class="circle">
      <button (click)="runTestDeduction()">Run Test Deduction</button>
    </div>
    <div *ngIf="deductionMessage" class="deduction-message">{{ deductionMessage }}</div>
    <div class="send-email-section">
      <h3>Send Email</h3>
      <form (ngSubmit)="sendEmail()">
        <input type="email" [(ngModel)]="recipient" name="recipient" placeholder="Recipient Email" required>
        <input type="text" [(ngModel)]="subject" name="subject" placeholder="Subject" required>
        <textarea [(ngModel)]="body" name="body" placeholder="Message" required></textarea>
        <button type="submit">Send Email</button>
        <div *ngIf="emailError" class="error-message">{{emailError}}</div>
        <div *ngIf="emailSuccess" class="success-message">{{emailSuccess}}</div>
      </form>
    </div>
  </ng-template>
</div>

<!-- Dashboard Content -->
<div class="dashboard-content" *ngIf="loggedIn">
  <div class="header">
    <h1>Dashboard</h1>
    <button class="logout-btn" (click)="logout()">Logout</button>
  </div>

  <!-- Transaction List Component -->
  <app-transaction-list></app-transaction-list>

  <!-- Transactions Section -->
  // ... existing code ...
</div> 
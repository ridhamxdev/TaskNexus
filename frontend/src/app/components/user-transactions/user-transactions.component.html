<!-- User Transactions Page -->
<div class="transactions-wrapper">
  <div class="transactions-container">
    <!-- Header Section -->
    <div class="page-header">
      <div class="header-content">
        <div class="title-section">
          <div class="title-icon">
            <i class="pi pi-list"></i>
          </div>
          <div class="title-text">
            <h1 class="page-title">My Transactions</h1>
            <p class="page-subtitle">Track your financial activities</p>
          </div>
        </div>
        <div class="header-actions">
          <button class="action-btn secondary" (click)="ngOnInit()">
            <i class="pi pi-refresh"></i>
            Refresh
          </button>
          <button class="action-btn primary" routerLink="/dashboard">
            <i class="pi pi-home"></i>
            Dashboard
          </button>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="content-section">
      <!-- Loading State -->
      <div *ngIf="isLoading" class="loading-state">
        <div class="loading-spinner">
          <i class="pi pi-spin pi-spinner"></i>
        </div>
        <p class="loading-text">Loading your transactions...</p>
      </div>

      <!-- Error State -->
      <div *ngIf="error && !isLoading" class="error-state">
        <div class="error-icon">
          <i class="pi pi-exclamation-triangle"></i>
        </div>
        <h3>Error Loading Transactions</h3>
        <p>{{ error }}</p>
        <button class="action-btn primary" (click)="ngOnInit()">
          <i class="pi pi-refresh"></i>
          Try Again
        </button>
      </div>

      <!-- Transactions Table -->
      <div *ngIf="!isLoading && !error && transactions.length > 0" class="transactions-table-container">
        <div class="table-header">
          <h2 class="table-title">Transaction History</h2>
          <div class="table-info">
            <span class="transaction-count">{{ transactions.length }} transactions</span>
          </div>
        </div>

        <div class="transactions-table">
          <div class="table-head">
            <div class="table-row header-row">
              <div class="table-cell">ID</div>
              <div class="table-cell">Date & Time</div>
              <div class="table-cell">Type</div>
              <div class="table-cell">Description</div>
              <div class="table-cell">Amount</div>
              <div class="table-cell">Status</div>
            </div>
          </div>
          
          <div class="table-body">
            <div *ngFor="let tx of transactions" class="table-row data-row">
              <div class="table-cell">
                <span class="transaction-id">#{{ tx.id }}</span>
              </div>
              <div class="table-cell">
                <div class="date-time">
                  <span class="date">{{ tx.transactionDate | date:'mediumDate' }}</span>
                  <span class="time">{{ tx.transactionDate | date:'shortTime' }}</span>
                </div>
              </div>
              <div class="table-cell">
                <div class="transaction-type" [class.credit]="tx.type === 'CREDIT'" [class.debit]="tx.type === 'DEBIT'">
                  <i class="pi" [class.pi-plus]="tx.type === 'CREDIT'" [class.pi-minus]="tx.type === 'DEBIT'"></i>
                  <span>{{ tx.type }}</span>
                </div>
              </div>
              <div class="table-cell">
                <div class="description">
                  <span class="desc-text">{{ tx.description }}</span>
                  <span class="created-at">Created: {{ tx.createdAt | date:'short' }}</span>
                </div>
              </div>
              <div class="table-cell">
                <span class="amount" [class.credit]="tx.type === 'CREDIT'" [class.debit]="tx.type === 'DEBIT'">
                  {{ tx.type === 'DEBIT' ? '-' : '+' }}â‚¹{{ tx.amount | number:'1.2-2' }}
                </span>
              </div>
              <div class="table-cell">
                <div class="status-badge completed">
                  <i class="pi pi-check"></i>
                  <span>Completed</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Pagination -->
        <div class="pagination-container" *ngIf="transactions.length > 10">
          <div class="pagination-info">
            <span>Showing 1-{{ Math.min(10, transactions.length) }} of {{ transactions.length }} transactions</span>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div *ngIf="!isLoading && !error && transactions.length === 0" class="empty-state">
        <div class="empty-icon">
          <i class="pi pi-wallet"></i>
        </div>
        <div class="empty-content">
          <h3>No Transactions Yet</h3>
          <p>You haven't made any transactions yet. Start by exploring our services!</p>
          <button class="action-btn primary" routerLink="/dashboard">
            <i class="pi pi-home"></i>
            Go to Dashboard
          </button>
        </div>
      </div>
    </div>
  </div>
</div> 